{% include 'layout/header.html'%}
{% for message in messages %}
<!--dir class="alert alert-info" {{message.tags}} alert-dismissible" role="alert" style="width: auto;">
	<button type="button" class="close" data-dismiss="alert" aria-label="Close">
		<span aria-hidden="true">&times;</span>
	</button>
	{{message}}
</dir-->
<script type="text/javascript">
	window.onload = function() {
		$(".load").fadeOut();
  	demo.showNotificationSucces('top','center', "{{message}}")
	};
	
</script>
{% endfor %}
		<div class="content">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-3 col-md-6 col-sm-6">
						<div class="card card-stats">
							<div class="card-header" data-background-color="green">
								 <i class="material-icons">card_giftcard</i>

							</div>
							<div class="card-content">

								<p class="category">Concursos Abierto</p>
								<h3 class="title">{{usuario.concursos_abiertos}}</h3>
							</div>
							<!--div class="card-footer">
								<div class="stats">
									<i class="material-icons text-danger">warning</i> <a href="#pablo">Get More Space...</a>
								</div>
							</div-->
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6">
						<div class="card card-stats">
							<div class="card-header" data-background-color="orange">
								 <i class="material-icons">card_travel</i>
							</div>
							<div class="card-content">
								<p class="category">Concursos Cerrados</p>
								<h3 class="title">{{usuario.concursos_cerrados}}</h3>
							</div>
							<!--div class="card-footer">
								<div class="stats">
									<i class="material-icons">date_range</i> Last 24 Hours
								</div>
							</div-->
						</div>
					</div>
					<div class="col-lg-3 col-md-6 col-sm-6">
						<div class="card card-stats">
							<div class="card-header" data-background-color="red">
								<i class="material-icons">group</i>
							</div>
							<div class="card-content">
								<p class="category">Seguidores</p>
								<h3 class="title">{{usuario.seguidores}}</h3>
							</div>
							<!--div class="card-footer">
								<div class="stats">
									<i class="material-icons">local_offer</i> Tracked from Github
								</div>
							</div-->
						</div>
					</div>

					<div class="col-lg-3 col-md-6 col-sm-6">
						<div class="card card-stats">
							<div class="card-header" data-background-color="blue">
								<i class="material-icons">group</i>
							</div>
							<div class="card-content">
								<p class="category">Seguidos</p>
								<h3 class="title">{{usuario.seguidos}}</h3>
							</div>
							<!--div class="card-footer">
								<div class="stats">
									<i class="material-icons">update</i> Just Updated
								</div>
							</div-->
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-md-12">
            <div class="card card-plain">
              <div class="card-header" data-background-color="purple">
                <h4 class="title">Productos</h4>
                <p class="category">Información basada en tus publicaciones de instagram</p>
              </div>
              <div class="card-content table-responsive">
                <table id="tabla" class="table table-hover ">
                  <thead class="text-succes" style="font-weight: bold">
                  	<tr>
                  		<center>
                  			<th style="width: 160px;">Imagen</th>
                  		</center>
                  		<center>
                  			<th>Descripción</th>	
                  		</center>
                  		
                  		<center>
                  			<th style="width: 149px;"> Acciones</th>
                  		</center>
                  	</tr>
                  </thead>
                  <tbody>
                 
                  {% for obj in feed %}
                  <tr>
                  	<td>

                  	{% if obj.image_versions2 is not Null %}
                  		<img class="img" src="{{obj.image_versions2.candidates.0.url}}"  />
                  		<input id="img-publi" name="{{obj.caption.media_id}}"  type="text" value="{{obj.image_versions2.candidates.0.url}}" style="display: none" />
                  		

                  	{% else %}
                  	
                  		
                  		<div id="myCarousel{{forloop.counter0}}" class="carousel" data-ride="carousel">
                  			<ol class="carousel-indicators">
                  			{% for orden in obj.carousel_media%}
                  				{% if forloop.first %}
										      <li data-target="#myCarousel{{ forloop.parentloop.counter }}" data-slide-to="{{forloop.counter0}}" class="active"></li>
										      
										      {% else %}
										      	<li data-target="#myCarousel{{ forloop.parentloop.counter }}" data-slide-to="{{forloop.counter0}}"></li>
										      {% endif %}
										    
										    {% endfor %}
										    </ol>
										    
										    
										    <div class="carousel-inner">
										    	{% for fotos in obj.carousel_media%}
										    		
										    		{%if forloop.first %}
										    			<div class="item active">
										    				<img src="{{fotos.image_versions2.candidates.0.url}}" alt="" style="width:100%;" >
										    				<input id="img-publi" name="{{obj.caption.media_id}}"  type="text" value="{{fotos.image_versions2.candidates.0.url}}" style="display: none" />
										    			</div>
										    			
										    		{% else %}
										    			<div class="item">
										    				<img src="{{fotos.image_versions2.candidates.0.url}}" alt="" style="width:100%;" ">
										    				<input id="img-publi" name="{{obj.caption.media_id}}"  type="text" value="{{fotos.image_versions2.candidates.0.url}}" style="display: none" />
										    			</div>
										    		{% endif %}
										    		
										    	{% endfor %}
										    
										    </div>
										    <a class="left carousel-control" href="#myCarousel{{forloop.counter0}}" data-slide="prev">
										      <!--span class="glyphicon glyphicon-chevron-left"></span>
										      <span class="sr-only">Previous</span-->
										      <i class="material-icons">keyboard_arrow_left</i>
										    </a>
										    <a class="right carousel-control" href="#myCarousel{{forloop.counter0}}" data-slide="next">
										      <!--span class="glyphicon glyphicon-chevron-right"></span>
										      <span class="sr-only">Next</span-->
										      <i class="material-icons">keyboard_arrow_right</i>
										    </a>
										  </div>
                  		<!--img class="img" src="{{obj.carousel_media.0.image_versions2.candidates.0.url}} " />
                  		</td-->

                  	{% endif %}
                  	<td> {{obj.caption.text}}</td>
                  	<!--td class="td-actions text-right"-->
                  	<td>
											 <!--div class="clearfix"></div-->
											<div class="row">
											 	<div class="col-sm-4">
											 	
										 		{% if obj.caption.pausado %}
													<button type="button" class="btn btn-simple ModalPlay" data-media="{{obj.caption.media_id}}" data-texto="{{obj.caption.text}}" title="Play a Venta" style="padding: 0px 0px !important">
													
														<i class="material-icons text-warning" style="font-size: 30px">play_arrow</i>

													</button>
												{%else%}
													<button type="button" class="btn btn-simple Modalcancelar" data-media="{{obj.caption.media_id}}" data-texto="{{obj.caption.text}}" title="Pausar Venta" style="padding: 0px 0px !important">
													
														<i class="material-icons text-warning" style="font-size: 30px">pause</i>

													</button>
												{%endif%}
												
											 	</div>
											 	<div class="col-sm-4">
													<button type="button" id="btn-vender" class="btn btn-simple Modalvender"  data-media="{{obj.caption.media_id}}"  data-comentario = "{{obj.caption.text}}" title="Vender" style="padding: 0px 0px !important">
													
														<i class="material-icons text-success" style="font-size: 30px">shop</i>

													</button> 		
											 	</div>
											 	
											 </div>
											 <div class="row">
											 	<div class="col-sm-4">
											 		<button type="button" class="btn btn-simple ModalAgregarConcurso"  data-media="{{obj.caption.media_id}}" title="Agregar como un Concurso" style="padding: 0px 0px !important">

											 			<i class="material-icons text-info" style="font-size: 30px">card_giftcard</i>

											 		</button>
											 	</div>
											 	{% if obj.caption.producto == False %}
											 	<div class="col-sm-4">						 	
											 		<button type=" button" class="btn btn-simple ModalAgregarProducto"  data-media="{{obj.caption.media_id}}" data-comentario = "{{obj.caption.text}}" title="Agregar Producto" style="padding: 0px 0px !important">

										 			<i class="material-icons text-primary" style="font-size: 30px">add_box</i>

										 			</button>
											 	</div>
											 	{%else %}
											 	<div class="col-sm-4">
													<button type="button" id="btn-editar" class="btn btn-simple ModalEditarProducto"  data-media="{{obj.caption.producto.media_id}}" title="Editar Producto" style="padding: 0px 0px !important"> 
													<i class="material-icons text-primary" style="font-size: 30px">edit</i>

										 			</button>		
											 	</div>
											 	
											 	{%endif%}
										 		
											</div>
											
											
											
											 <!--div class="clearfix"></div-->
										</td>
									</tr>
                  {% endfor%}
              		</tbody>

                </table>
              </div>
            </div>
          </div>
				</div>
				
			</div>
		</div>

		{% include 'layout/footer.html'%}		
	</div>
</div>


</body>


<!-- Modal Agregar Producto Index-->
<div class="modal fade" id="ModalAgregarProducto" tabindex="-1" role="dialog" aria-labelledby="ModalAgregarProductoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="ModalAgregarProductoLabel">Agregar Producto</h4>
      </div>
      <div class="modal-body">
      	<p>Al agregar este producto podrar administrar mejor tus ventas</p>
      	<form class="form form-add-producto" method="post" action='{% url "admingo:agregar_producto" %}'>
				{% csrf_token %}
		      <div class="row">
		      	<div class="col-lg-6">
		      		<div class="div-talla form-group label-floating">
		      			<label class="control-label">Talla</label>
		      			<input type="text" name="talla-agregar" id="talla-agregar" class="form-control" >
		      		</div>
		      	</div>
		      	<div class="col-lg-6">
		      		<div class="div-modelo form-group label-floating">
		      			<label class="control-label">Modelo</label>
		      			<input type="text" name="modelo-agregar" id="modelo-agregar" class="form-control" >
		      		</div>
		      	</div>
		      	<div class="col-lg-4">
		      		<div class="div-cantidad-agregar form-group label-floating">
		      			<label class="control-label">Cantidad</label>
		      			<input type="number" name="cantidad-agregar" id="cantidad-agregar" class="form-control" required="" >
		      		</div>
		      		<p id="erro-cantidad-agregar" style="display: none; color: #6d0074; font-size: 12px;"> - Debe ser mayor a cero(0).</p>
		      	</div>
		      		<div class="col-md-8">
			      		<div class="togglebutton">
		            	<label>
		            		<span id ="res-automatica-add-no" >No</span> 
		               	
		               	<input id="res-automatica-add" name="res-automatica-add" type="checkbox" >

		               	<span id ="res-automatica-add-si">Si</span> 
		            	</label>
		            	<span style="margin-left: 10%">Respuesta automatica?</span>
		           		
		            </div>
		            <p style="font-size: 12px">al recibir un comentario preguntando, precio o disponibilidad, responderemos de forma automatica</p>
		          </div>
		      	
		      	<div class="col-lg-12">
		      		<div class="form-group label-floating">
		      			<label class="control-label">Descripción</label>
		      			<input type="text" name="descripcion-add-p" id="descripcion-add-p" class="form-control">

		      		</div>
		      	</div>
		      	<div class="form-group label-floating" style="display: none">
		      	<input  name="media_id_add" id="media_id_add" value="" style="display: none" >
		      	<input  name="comentario-add" id="comentario-add" value="" style="display: none" >
		      	<input  name="res-automatica-add-check" id="res-automatica-add-check" value="" style="display: none" >
		      	</div>
		      	
		      </div>
		    
        	
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Cancelar</button>
	        <button type="submit" class="btn btn-success btn-simple" id="btn-add">Guardar</button>
	      </div>
	      </form>
	    </div>
	  </div>
  </div>
</div>

<!-- Modal para Vender Index-->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Vender</h4>
      </div>
      <div class="modal-body">
      	<form class="form form-vender" method="post" action='{% url "admingo:vender" %}'>
				{% csrf_token %}
		      <div class="row">
			      
		      	<div class="col-lg-6">
	  		      <div class="form-group label-floating has-error">
	  						<label class="control-label">Compadror</label>
	  						<input type="text" name="nombre" id="nombre" class="form-control" required="">
	  					</div>	
		      	</div>

		      	<div class="col-lg-6">
		      		<div class="form-group label-floating has-error">
		      			<label class="control-label">Telefono</label>
		      			<input type="text" name="telefono" id="telefono" class="form-control" >
		      		</div>	
		      	</div>	      	
		      </div>
		      <div class="row">
		      	<div class="col-lg-4">
		      		<div class="div-cantidad-venta form-group label-floating">
		      			<label class="control-label">Cantidad</label>
		      			
		      			<input type="number" name="cantidad_venta" id="cantidad_venta" value="" class="form-control" required="" >

		      			<input type="number" name="cantidad_pro_input" id="cantidad_pro_input" style="display: none">

		      		</div>
		      		<p id="cant_pro_id" style="display: none; color: #6d0074; font-size: 12px;"></p>

		      		<p id="erro-cantidad-venta" style="display: none; color: #e53935; font-size: 12px;"></p>
		      	</div>
		      	<div class="col-lg-4">
		      		<div class="div-precio form-group label-floating">
		      			<label class="control-label">Precio</label>
		      			<input type="number" name="precio" id="precio" class="form-control" required="" >
		      		</div>
		      		<p id="erro-precio" style="display: none; color: #e53935; font-size: 12px;"> - Debe ser mayor a cero(0).</p>
		      	</div>
		      	<div class="col-lg-12">
		      		<div class="form-group label-floating">
		      			<label class="control-label">Detalle de la venta</label>
		      			<input type="text" name="descripcion" id="descripcion" class="form-control">
		      		</div>
		      	</div>
		      	<div class="form-group label-floating" style="display: none">
		      	<input  name="media_id" id="media_id" value="" style="display: none" >
		      	<input  name="comentario-vender" id="comentario-vender" value="" style="display: none" >
		      	</div>
		      	
		      </div>
		    
        	
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Cancelar</button>
	        <button type="submit" class="btn btn-success btn-simple" id="btn-vender">Vender</button>
	      </div>
	      </form>
	    </div>
	  </div>
  </div>
</div>

<!-- Modal Pausa la Venta Index-->
<div class="modal fade" id="MyPausar" tabindex="-1" role="dialog" aria-labelledby="MyPausarLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="MyPausarLabel">Pausar Venta</h4>
      </div>
      <form class="form form-pausar-venta" method="post" >
      	<div class="modal-body">
	     
	      	{% csrf_token %}
	      	Al momento de pausar la venta el pie de foto o comentario de su publicacion se actualizara de la siguiente forma:<br>
	      	<div class="form-group label-floating ">
	    			<label class="control-label">Titulo</label>
	    			<!--input id="text-publi" type="text" name="text-publi" value= "" class="form-control" required=""-->
	    			<textarea id="text-publi" name="text-publi" class="form-control" rows="5" required=""></textarea>
	    		</div>
	    		<input  name="media_id" id="media_id" value="" style="display: none" >
	      
      
	      	
	      </div>
	        	
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Cancelar</button>
	        <button type="submit" class="btn btn-success btn-simple">Pausar</button>
	      </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Play la Venta Index-->
<div class="modal fade" id="MyPlay" tabindex="-1" role="dialog" aria-labelledby="MyPlayLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="MyPlay">Play Venta</h4>
      </div>
      <form class="form form-play-venta" method="post">
      	<div class="modal-body">
	     
	      	{% csrf_token %}
	      	Al momento de republicar la venta el pie de foto o comentario de su publicacion se actualizara de la siguiente forma:<br>
	      	<div class="form-group label-floating ">
	    			<label class="control-label">Titulo</label>
	    			<!--input id="text-publi" type="text" name="text-publi" value= "" class="form-control" required=""-->
	    			<textarea id="text-publi-play" name="text-publi-play" class="form-control" rows="5" required=""></textarea>
	    		</div>
	    		<input  name="media_id" id="media_id" value="" style="display: none" >
	      
      
	      	
	      </div>
	        	
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Cancelar</button>
	        <button type="submit" class="btn btn-success btn-simple">Play</button>
	      </div>
      </form>
    </div>
  </div>
</div>
<!-- Modal Preguntar Para Agregar Concurso Index-->
<div class="modal fade" id="ModalPreguntaAgregarConcurso" tabindex="-1" role="dialog" aria-labelledby="ModalPreguntaAgregarConcursoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
      </div>
      <form class="form form-agregar-concurso" method="post">
      {% csrf_token %}
	      <div class="modal-body" id="texto-ganadores">
	      	<h3> Deseas agregar esta publicación como concurso.?</h3>
	      	<center>
	      		<button type="button" class="btn btn-default" data-dismiss="modal" >NO</button>
	        	<button type="button" class="btn btn-success" id="btn-si-agragar-concurso"  data-mediaid="">SI</button>	
	      	</center>
	      	
	    	</div>
    	</form>
    	<div class="modal-footer">
        
      </div>
	  </div>
	</div>
</div>

<!-- Modal Editar Producto-->
<div class="modal fade" id="ModalEditarProducto" tabindex="-1" role="dialog" aria-labelledby="ModalEditarProductoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="ModalEditarProductoLabel">Editar Producto</h4>
      </div>
      <div class="modal-body">
      	<form class="form form-edit-producto" method="post" action='{% url "admingo:editar_producto" %}'>
				{% csrf_token %} 
		      
			    <div class="row">
			    	<div class="col-lg-4 " id="not-tallas"  style="margin-top: 31px">
			    		<div  class="form-group label-floating">
    						<label class="control-label">Talla</label>
    						<input type="text" name="nueva-talla-not" id="nueva-talla-not" class="form-control" required="">
    					</div>	
    				</div>
    				<div  id="tallas-fine">
				    	<div class="col-lg-4 ">		    		

				    		<div class="form-group">
				    			<label class="control-label">Talla</label>
				    			<select class="form-control" id="tallas-select">
				    			</select> 
				    			
				    		</div>

				    		
				    	</div>
				    	<div class="col-lg-2  form-group">
				    		<button type="button" class="btn btn-simple" id ="agregar-talla" title="Agregar nueva talla" style="padding: 0px 0px !important">

						 			<i class="material-icons text-success" style="font-size: 30px">add</i>

					 			</button>
					 			<p style="font-size: 9px">Nueva talla</p>
				    	</div>
    				</div>
    				<div class="col-lg-4 " id="not-modelos"  style="margin-top: 31px">
			    		<div  class="form-group label-floating">
    						<label class="control-label">Modelo</label>
    						<input type="text" name="nueva-modelo-not" id="nueva-modelo-not" class="form-control" required="">
    					</div>	
    				</div>
			    	<div  id="modelos-fine">
				    	<div class="col-lg-4 ">
				    		<div class="form-group">
				    			<label class="control-label">Modelo</label>
				    			<select class="form-control" id="modelos-select">

				    			</select> 
				    		</div>
				    		
				    	</div>
				    	<div class="col-lg-2 form-group">
				    		<button type="button" class="btn btn-simple"  id="agregar-modelo" title="Agregar nuevo modelo" style="padding: 0px 0px !important">

						 			<i class="material-icons text-success" style="font-size: 30px">add</i>

					 			</button>
					 			<p style="font-size: 9px">Nuevo modelo</p>
				    	</div>
				    </div>
			    </div>
		      <div class="row">
		      	<div class="col-lg-4">
		      		<div class="div-cantidad form-group label-floating">
		      			<label class="control-label">Cantidad</label>
		      			<input type="number" name="cantidad-editar" id="cantidad-editar" class="form-control" required="" >
		      		</div>
		      		<p id="erro-cantidad-editar" style="display: none; color: #6d0074; font-size: 12px;"> </p>
		      	</div>
		      		<div class="col-md-8">
			      		<div class="togglebutton">
		            	<label>
		            		<span id ="res-automatica-edit-no" >No</span> 
		               	
		               	<input id="res-automatica-edit" name="res-automatica-edit" type="checkbox" value="">

		               	<span id ="res-automatica-edit-si">Si</span> 
		            	</label>
		            	<span style="margin-left: 10%">Respuesta automatica?</span>
		           		
		            </div>
		            <p style="font-size: 12px">al recibir un comentario preguntando, precio o disponibilidad, responderemos de forma automatica</p>
		          </div>
		      	
		      	<div class="col-lg-12">
		      		<div class="form-group label-floating">
		      			<label class="control-label">Descripción</label>
		      			<input type="text" name="descripcion-edit-p" id="descripcion-edit-p" class="form-control">
		      		</div>
		      	</div>
		      	<div class="form-group label-floating" style="display: none">
		      	<input  name="media_id_edit" id="media_id_edit" value="" style="display: none" >
		      	
		      	<input  name="res-automatica-edit-check" id="res-automatica-edit-check" value="" style="display: none" >
		      	</div>
		      	
		      </div>
		    
        	
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Cancelar</button>
	        <button id="btn-guardar-edit-pro" type="submit" class="btn btn-success btn-simple" >Guardar</button>
	      </div>
	      </form>
	    </div>
	  </div>
  </div>
</div>

<!-- Modal agregar talla-->
<div class="modal fade" id="ModalAgregarTalla" tabindex="-1" role="dialog" aria-labelledby="ModalAgregarTallatoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" >Nueva Talla</h4>
      </div>
      <div class="modal-body">
		    <div class="row">
				      
	      	<div class="col-lg-6">
			      <div class="form-group label-floating has-error">
							<label class="control-label">Talla</label>
							<input type="text" name="nueva-talla-new" id="nueva-talla-new" class="form-control" required="">
							<input type="text" name="nueva-talla-mediaid" id="nueva-talla-mediaid" style="display: none;">
						</div>	
	      	</div>
	    	</div>
	    	<div class="modal-footer">
	        <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Cancelar</button>
		      <button type="submit" class="btn btn-success btn-simple" id="btn-save-nueva-talla-new">Guardar</button>
	      </div>
		  </div>
		</div>
	</div>
</div>

<!-- Modal agregar modelo-->
<div class="modal fade" id="ModalAgregarModelo" tabindex="-1" role="dialog" aria-labelledby="ModalAgregarModelotoLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" >Nuevo Modelo</h4>
      </div>
      <div class="modal-body">
	    	<div class="row">
			      
	      	<div class="col-lg-6">
			      <div class="form-group label-floating has-error">
							<label class="control-label"> Modelo</label>
							<input type="text" name="nueva-modelo-new" id="nueva-modelo-new" class="form-control" required="">
							<input type="text" name="nueva-modelo-mediaid" id="nueva-modelo-mediaid" style="display: none;">
						</div>	
	      	</div>
	    	</div>
	    	<div class="modal-footer">
	        <button type="button" class="btn btn-default btn-simple" data-dismiss="modal">Cancelar</button>
		      <button type="submit" class="btn btn-success btn-simple" id="btn-save-nueva-modelo-new">Guardar</button>
	      </div>
		  </div>
		</div>
	</div>
</div>


	

    
    

	<script type="text/javascript">
  	$(document).ready(function(){

			// Javascript method's body can be found in assets/js/demos.js
    	demo.initDashboardPageCharts();
    	$.extend( true, $.fn.dataTable.defaults, {
			    "searching": true,
			    "ordering": false
			} );
    	$('#tabla').DataTable({
		    "language": {"decimal":        "",
		    "emptyTable":     "No hay datos en la tabla",
		    "info":           "Mostrando _START_ de _END_ entre _TOTAL_ registros",
		    "infoEmpty":      "Mostrando 0 de 0 entre 0 Registros",
		    "infoFiltered":   "(Filtrado de _MAX_  Registros)",
		    "infoPostFix":    "",
		    "thousands":      ",",
		    "lengthMenu":     "Mostrar _MENU_ Registros",
		    "loadingRecords": "Cargando...",
		    "processing":     "Procesando...",
		    "search":         "Buscar:",
		    "zeroRecords":    "No hay concidencias",
		    "paginate": {
		        "first":      "Primero",
		        "last":       "Ultimo",
		        "next":       "Siguiente",
		        "previous":   "Anterior"
		    }
		  	}
		    
			});

			

			$(".ModalAgregarConcurso").on('click',function(){
				media_id =$(this).attr('data-media');			
				
				$('#btn-si-agragar-concurso').attr('data-mediaid', media_id);
				
		    $('#ModalPreguntaAgregarConcurso').modal('show');

			});


			$("#btn-si-agragar-concurso").on("click", function () {

				media_id=$("#btn-si-agragar-concurso").attr('data-mediaid');
				console.log("media_id desde html "+media_id);
				var csrftoken = getCookie('csrftoken');
				$.ajax({
			 		url : '{% url "admingo:nuevo_concurso" %}',
			    type : 'POST',
			    cache: false,
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'media_id' : media_id
			    	},

					beforeSend: function() {
		        // setting a timeout
		        $('#ModalPreguntaAgregarConcurso').modal('hide');
		        $(".load").fadeIn();

		        //console.log("Before Send");
    				//$.ajaxSettings.beforeSend(xhr, settings);
		    	},
			    success : function(data){
						//console.log(data);
						//$('#ModalPreguntaAgregarConcurso').modal('hide');
						//console.log("estado: "+ data.estado)
						$(".load").fadeOut();
						demo.showNotificationSucces('top','center','Hemos agregado el concurso')
						window.location.replace("{% url 'admingo:nuevo_concurso' %}");
						$(".load").fadeIn();
						
			        
			    },
	        error : function(xhr,errmsg,err) {
					 console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
					 $(".load").fadeOut();
					 }              
					

				});

			});
			$('.ModalPlay').on('click',function(){
				media_id =$(this).attr('data-media');
				text_publi =$(this).attr('data-texto');

				
				$('#text-publi-play').val(text_publi);				
				$('#media_id').val(media_id);
		    $('#MyPlay').modal('show');

			});

			$("#MyPlay").on("submit", ".form-play-venta", function (e) {
				e.preventDefault();
				var texto = $('#text-publi-play').val();
				var media_id = $('#media_id').val();
				var csrftoken = getCookie('csrftoken');
				//var array_img = $('#array_img').serializeArray()
				$.ajax({
			    url : '{% url "admingo:play_venta" %}',
			    type : 'POST',
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'texto': texto,		    		
			    		'media_id' : media_id,
			    	},
					beforeSend: function() {
		        // setting a timeout
		        $(".load").fadeIn();
		        $('#MyPlay').modal('hide');
		        //console.log("Before Send");
	  				//$.ajaxSettings.beforeSend(xhr, settings);
		    	},
			    success : function(data){
						//console.log(data);
						if(data.estado == 1){
							demo.showNotificationSucces('top','center','Venta Republicada satisfactoriamente');
							$(".load").fadeIn();
							location.reload();

						}else{
							demo.showNotificationError('top','center', "No pudimos republicar. Intentalo de nuvo");
							$(".load").fadeIn();
							location.reload();
						}
							
							/*setTimeout(function(){// wait for 5 secs(2)
           			location.reload(); // then reload the page.(3)
      				}, 2000); **/
					//$(".load").fadeOut();
			        
			    },
	        error : function(xhr,errmsg,err) {
					 console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
					 }              
			
				});
					

	  	});
			$('.Modalcancelar').on('click',function(){
				media_id =$(this).attr('data-media');
				text_publi =$(this).attr('data-texto');

				
				$('#text-publi').val("--- Venta PAUSADA --- "+text_publi);				
				$('#media_id').val(media_id);
		    $('#MyPausar').modal('show');

			});

			$("#MyPausar").on("submit", ".form-pausar-venta", function (e) {
				e.preventDefault();
				var texto = $('#text-publi').val();
				var media_id = $('#media_id').val();
				var csrftoken = getCookie('csrftoken');
				//var array_img = $('#array_img').serializeArray()
				$.ajax({
			    url : '{% url "admingo:pausar_venta" %}',
			    type : 'POST',
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'texto': texto,		    		
			    		'media_id' : media_id,
			    		'desde_pro': 0
			    	},
					beforeSend: function() {
		        // setting a timeout
		        $(".load").fadeIn();
		        $('#MyPausar').modal('hide');
		        //console.log("Before Send");
	  				//$.ajaxSettings.beforeSend(xhr, settings);
		    	},
			    success : function(data){
						//console.log(data);
							if (data.estado == 1){
								demo.showNotificationSucces('top','center','Venta Pausada satisfactoriamente');
							location.reload();	
							}else{
								demo.showNotificationError('top','center','No pudimos Pausada la publicación. Intentalo nuevamente.');
							location.reload();
							}
							
			        
			    },
	        error : function(xhr,errmsg,err) {
					 console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
					 }              
			
				});
					

	  	});

	  	$('.Modalvender').on('click',function(){
				media_id =$(this).attr('data-media');
				comentario = $(this).attr('data-comentario');
				var csrftoken = getCookie('csrftoken');
				
				$('#media_id').val(media_id);
				$('#comentario-vender').val(comentario);

				$.ajax({
			    url : '{% url "admingo:get_producto" %}',
			    type : 'POST',
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'media_id' : media_id,
			    	},
					beforeSend: function() {
		        // setting a timeout
		        $(".load").fadeIn();
		        //$('#myModal').modal('hide');
		        //console.log("Before Send");
    				//$.ajaxSettings.beforeSend(xhr, settings);
		    	},
			    success : function(data){
						//console.table(data.producto);
						if (data.producto.encontre == true){
							if (data.producto.disponible == 0){
								$(".load").fadeOut();
								demo.showNotificationError('top','center','Producto no disponible. Puede estar pausada la venta, o no tienes disponiblidad');	
							}else{
								if (data.producto.cantidad > 0){
									$('#cant_pro_id').css("display", "block");
									$('#cant_pro_id').html("- Disponible: "+data.producto.cantidad);
									$('#cantidad_pro_input').val(data.producto.cantidad);	
								}else{

									$('#cant_pro_id').css("display", "block");
									$('#cant_pro_id').html("- Disponible: "+data.producto.cantidad);
									$('#cantidad_pro_input').val(data.producto.cantidad);	
								}
								$(".load").fadeOut();
								$('#myModal').modal('show');
							}
							
						}else{
							$(".load").fadeOut();
							$('#cant_pro_id').css("display", "none");
							$('#cantidad_pro_input').val("");	
							$('#myModal').modal('show');
						}			
			        
			    },
	        error : function(xhr,errmsg,err) {
						console.log(xhr.status + ": " + xhr.responseText);
					 	$(".load").fadeOut();
					 }              
			
				});


			});

	  	$("#cantidad_venta").change(function() {


				cantidad = $('#cantidad_venta').val();
				//console.log("cambie cantidad: "+ cantidad);

				cant_pro = $("#cantidad_pro_input").val();
				//console.log("cambie cant_pro: "+ cant_pro);
				if (cantidad <= 0){
					$("#div-cantidad-venta").addClass("has-error");
					$("#erro-cantidad-venta").html("- Debe ser mayor a cero(0).");
					$("#erro-cantidad-venta").css("display", "block");
					if (cant_pro > 0){
						
						//console.log("----- resta: "+ resta)
						if (cantidad <=-1){
								$("#cant_pro_id").html("- Disponible: 0");
						}else{
							resta = cant_pro-cantidad;
							if (resta >= 0){
								$("#cant_pro_id").html("- Disponible: "+(resta));

							}
						}
						
						
					}
					
				}else{
					$("#div-cantidad-venta").removeClass("has-error");
					$("#erro-cantidad-venta").css("display", "none");
					if (cant_pro > 0){
						resta = cant_pro-cantidad;
						//console.log("----- resta: "+ resta)
						if (resta >= 0){
							$("#cant_pro_id").html("- Disponible: "+(resta));

						}else{
							$("#div-cantidad-venta").addClass("has-error");
							$("#erro-cantidad-venta").html("- No dispones suficientes.");
							$("#erro-cantidad-venta").css("display", "block");
							$("#cant_pro_id").html("- Disponible: 0 ");	
							
						}
						
					}
					
				}
				
			});

			$("#precio").change(function() {

				precio = $('#precio').val();
				if (precio <= 0){
					$("#div-precio").addClass("has-error");
					$("#erro-precio").css("display", "block");
				}else{
					$("#div-precio").removeClass("has-error");
					$("#erro-precio").css("display", "none");
				}
				
			});

			$("#myModal").on("submit", ".form-vender", function (e) {
				e.preventDefault();
				var array_img = [];
				var nombre = $('#nombre').val();
				var telefono = $('#telefono').val();
				var cantidad = $('#cantidad_venta').val();
				var cant_pro = $('#cantidad_pro_input').val();// cantidad guardada
				var precio = $('#precio').val();
				var descripcion = $('#descripcion').val();
				var media_id = $('#media_id').val();
				var texto =  $('#comentario-vender').val();
				console.log("desde el modal: "+texto)
				
				var csrftoken = getCookie('csrftoken');
				//var array_img = $('#array_img').serializeArray()
				
				$('input[id^="img-publi"]').each(function() {
				  array_img.push([this.name, this.value]);

				});

				var result_img = array_img.filter(function(v,i) {
				  return v[0] === media_id;
				});
				//console.table(array_img);
				//console.log(result_img);
				if (cant_pro > 0){
					if( cant_pro-cantidad < 0){
						demo.showNotificationError('top','center','No dispones sufiencientes Productos');
						return false;
					
					}	
					
				}
				if (cantidad <= 0){
					demo.showNotificationError('top','center','La cantidad debe ser positiva');
					
					return false;
				}else{
					if (precio <= 0){
						demo.showNotificationError('top','center','El precio debe ser positivo');
						
						return false;
					}else{
						$.ajax({
					    url : '{% url "admingo:vender" %}',
					    type : 'POST',
					    data : 
					    	{	'csrfmiddlewaretoken' : csrftoken,
					    		'nombre': nombre,
					    		'telefono' : telefono,
					    		'cantidad' : cantidad,
					    		'precio' : precio,
					    		'descripcion': descripcion,
					    		'media_id' : media_id,
					    		'texto':texto,
					    		'result_img[]' : result_img
					    	},
							beforeSend: function() {
				        // setting a timeout
				        $(".load").fadeIn();
				        $('#myModal').modal('hide');
				        //console.log("Before Send");
        				//$.ajaxSettings.beforeSend(xhr, settings);
				    	},
					    success : function(data){
								//console.log(data);
								if (data.estado == 0){
									$(".load").fadeOut();
									demo.showNotificationError('top','center','No tienes sufientes de este producto');
								}else{
									$(".load").fadeOut();
									$('#myModal').modal('hide');
									demo.showNotificationSucces('top','center','Venta almacenada en el sistema')	
								}
								
							
					        
					    },
			        error : function(xhr,errmsg,err) {
								console.log(xhr.status + ": " + xhr.responseText);
							 	$(".load").fadeOut();
							 }              
					
						});
					}
					
				}
					
			});

			

			if($('#res-automatica-add').is(':checked')){
				$("#res-automatica-add-si").css("color", "black");
		    $("#res-automatica-add-no").css("color", "rgba(0,0,0, 0.26)");
		    $("#res-automatica-add-check").val("si")

			}else{
				$("#res-automatica-add-no").css("color", "black");
		   	$("#res-automatica-add-si").css("color", "rgba(0,0,0, 0.26)");
		   	$("#res-automatica-add-check").val("no")
			}

			$("#res-automatica-add").change(function() {
		    if(this.checked) {
		      $("#res-automatica-add-si").css("color", "black");
		      $("#res-automatica-add-no").css("color", "rgba(0,0,0, 0.26)");
		      $("#res-automatica-add-check").val("si")
		    }else{
		    	$("#res-automatica-add-no").css("color", "black");
		    	$("#res-automatica-add-si").css("color", "rgba(0,0,0, 0.26)");
		    	$("#res-automatica-add-check").val("no")
		    	
		    }
		   });
			$("#cantidad-agregar").change(function() {


			cantidad = $('#cantidad-agregar').val();
				if (cantidad <= 0){
					$("#erro-cantidad-agregar").addClass("has-error");
					$("#erro-cantidad-agregar").html("- Debe ser mayor a cero(0).");
					$("#erro-cantidad-agregar").css("display", "block");
					
					
				}else{
					$("#erro-cantidad-agregar").removeClass("has-error");
					$("#erro-cantidad-agregar").css("display", "none");
				}
				
			});

			$('.ModalAgregarProducto').on('click',function(){
				media_id =$(this).attr('data-media');
				comentario =$(this).attr('data-comentario');

				$('#comentario-add').val(comentario);			
				$('#media_id_add').val(media_id);
		    $('#ModalAgregarProducto').modal('show');

			});
			
			
	  	$("#ModalAgregarProducto").on("submit", ".form-add-producto", function (e) {
				
				e.preventDefault();
				var array_img= []
				var cantidad = $('#cantidad-agregar').val();
				var descripcion = $('#descripcion-add-p').val();
				var res_automatica = $('#res-automatica-add-check').val();
				var media_id = $('#media_id_add').val();
				var csrftoken = getCookie('csrftoken');
				var texto = $('#comentario-add').val();
				var talla = $('#talla-agregar').val();
				var modelo = $('#modelo-agregar').val();
				$('input[id^="img-publi"]').each(function() {
				  array_img.push([this.name, this.value]);

				});

				var result_img = array_img.filter(function(v,i) {
				  return v[0] === media_id;
				});
				if (cantidad <= 0){
					$("#div-cantidad-agregar").addClass("has-error");
					$("#erro-cantidad-agregar").css("display", "block");
					
					return false;
				}else{
					$.ajax({
				    url : '{% url "admingo:agregar_producto" %}',
				    type : 'POST',
				    data : 
				    	{	'csrfmiddlewaretoken' : csrftoken,
				    		'media_id' : media_id,
				    		'cantidad' : cantidad,
				    		'descripcion' : descripcion,
				    		'result_img[]' : result_img,
				    		'texto': texto,
				    		'modelo': modelo,
				    		'talla': talla,
				    		'res_automatica' : res_automatica
				    	},
						beforeSend: function() {
			        // setting a timeout
			        $('#ModalAgregarProducto').modal('hide');
			        $(".load").fadeIn();
			        //console.log("Before Send");
		  				//$.ajaxSettings.beforeSend(xhr, settings);
			    	},
				    success : function(data){
							//console.log(data);

							$('#ModalAgregarProducto').modal('hide');
								demo.showNotificationSucces('top','center','Producto Agregado con exito. Ahora lo puedes ver con mas detalle en la sección de Mis Productos');
									location.reload();
								/*setTimeout(function(){// wait for 5 secs(2)
	           			location.reload(); // then reload the page.(3)
	      				}, 2000); */
						//$(".load").fadeOut();
				        
				    },
		        error : function(xhr,errmsg,err) {
		        	$(".load").fadeOut();
						 	console.log(xhr.status + ": " + xhr.responseText); 
							$('#ModalAgregarProducto').modal('hide');
						}              
				
					});
				}
				
					

	  	});

	  	if($('#res-automatica-edit').is(':checked')){
				$("#res-automatica-edit-si").css("color", "black");
		    $("#res-automatica-edit-no").css("color", "rgba(0,0,0, 0.26)");
		    $("#res-automatica-edit-check").val("si")

			}else{
				$("#res-automatica-edit-no").css("color", "black");
		   	$("#res-automatica-edit-si").css("color", "rgba(0,0,0, 0.26)");
		   	$("#res-automatica-edit-check").val("no")
			}

			$("#res-automatica-edit").change(function() {
		    if(this.checked) {
		      $("#res-automatica-edit-si").css("color", "black");
		      $("#res-automatica-edit-no").css("color", "rgba(0,0,0, 0.26)");
		      $("#res-automatica-edit-check").val("si")
		    }else{
		    	$("#res-automatica-edit-no").css("color", "black");
		    	$("#res-automatica-edit-si").css("color", "rgba(0,0,0, 0.26)");
		    	$("#res-automatica-edit-check").val("no")
		    	
		    }
		   });

	  	$("#cantidad-editar").change(function() {


				cantidad = $('#cantidad-editar').val();
				if (cantidad < 0){
					$("#erro-cantidad-editar").addClass("has-error");
					$("#erro-cantidad-editar").html("- Debe ser un valor positivo.");
					$("#erro-cantidad-editar").css("display", "block");
					
					
				}else{
					$("#erro-cantidad-editar").removeClass("has-error");
					$("#erro-cantidad-editar").css("display", "none");
				}
				
			});

	  	$('.ModalEditarProducto').on('click',function(){
				media_id =$(this).attr('data-media');
				var csrftoken = getCookie('csrftoken');
				$.ajax({
			    url : '{% url "admingo:get_producto" %}',
			    type : 'POST',
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'media_id' : media_id,
			    	},
					beforeSend: function() {
		        // setting a timeout
		        $(".load").fadeIn();
		        //$('#myModal').modal('hide');
		        //console.log("Before Send");
    				//$.ajaxSettings.beforeSend(xhr, settings);
		    	},
			    success : function(data){
						console.table(data.producto);
						if (data.producto.encontre == true){
							$("#cantidad-editar").val(data.producto.cantidad);
							$("#descripcion-edit-p").val(data.producto.descripcion_producto);
							$('#media_id_edit').val(data.producto.media_id);
							$("#div-modelo").removeClass("has-error")
							$("#div-talla").removeClass("has-error")
							
					  	if(data.producto.res_automatica == 1){
					  		console.log("data.producto.res_automatica: "+ data.producto.res_automatica );
					  		$('#res-automatica-edit').prop('checked', true);
								$("#res-automatica-edit-si").css("color", "black");
						    $("#res-automatica-edit-no").css("color", "rgba(0,0,0, 0.26)");
						    $("#res-automatica-edit-check").val("si")

							}else{
								$('#res-automatica-edit').prop('checked', false);
								$("#res-automatica-edit-no").css("color", "black");
						   	$("#res-automatica-edit-si").css("color", "rgba(0,0,0, 0.26)");
						   	$("#res-automatica-edit-check").val("no")
							}

							$(".load").fadeOut();
							mostrar_tallas(media_id);
							mostrar_modelos(media_id)
															
					    $('#ModalEditarProducto').modal('show');
							
						}
			    },
	        error : function(xhr,errmsg,err) {
						console.log(xhr.status + ": " + xhr.responseText);
					 	$(".load").fadeOut();
					 }              
			
				});
			});
	  	$("#btn-guardar-edit-pro").on("click", function (e) {
				
				e.preventDefault();

				var cantidad = $('#cantidad-editar').val();
				var descripcion = $('#descripcion-edit-p').val();
				var res_automatica = $('#res-automatica-check').val();
				var media_id = $('#media_id_edit').val();
				var csrftoken = getCookie('csrftoken');
				var texto = $('#comentario-edit').val();
				var talla_id = ""
				var talla = ""
				var modelo_id = ""
				var modelo = ""

				if ($("#nueva-talla-not").val() != ""){
					// no tiene talla
					talla = $("#nueva-talla-not").val()
				}else{
					// con el select
					talla_id= $( "#tallas-select" ).val();
				}

				if ($("#nueva-modelo-not").val() != ""){
					// no tiene modelo
					modelo = $("#nueva-modelo-not").val()
				}else{
					// con el select
					modelo_id= $( "#modelos-select" ).val();
				}


				if (cantidad < 0){
					$("#div-cantidad").addClass("has-error");
					$("#erro-cantidad").css("display", "block");
					
					return false;
				}else{
					$.ajax({
				    url : '{% url "admingo:editar_producto" %}',
				    type : 'POST',
				    data : 
				    	{	'csrfmiddlewaretoken' : csrftoken,
				    		'media_id' : media_id,
				    		'cantidad' : cantidad,
				    		'descripcion' : descripcion,
				    		'res_automatica' : res_automatica,
				    		'talla': talla,
				    		'talla_id': talla_id,
				    		'modelo': modelo,
				    		'modelo_id': modelo_id
				    	},
						beforeSend: function() {
			        // setting a timeout
			        $('#ModalEditarProducto').modal('hide');
			        $(".load").fadeIn();
			        //console.log("Before Send");
		  				//$.ajaxSettings.beforeSend(xhr, settings);
			    	},
				    success : function(data){
							console.log(data);
							$(".load").fadeOut();
							if (data.estado == 1){
								demo.showNotificationSucces('top','center','Producto editado con exito.');
								
							
							}else{
								demo.showNotificationError('top','center','Hubo un problema al editar el producto. Intentalo nuevamente.')

							}
				    },
		        error : function(xhr,errmsg,err) {
		        	$(".load").fadeOut();
						 	console.log(xhr.status + ": " + xhr.responseText); 
							$('#ModalEditarProducto').modal('hide');
						}              
				
					});
				}
				
					

	  	});

	  	

			function mostrar_tallas(media_id) {
				valor = false
				var csrftoken = getCookie('csrftoken');
				$.ajax({
			    url : '{% url "admingo:show_tallas" %}',
			    type : 'POST',
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'media_id' : media_id
			    	},
			    success : function(data){

						if (data.estado == 1){
							$("#tallas-fine").css('display', 'block')
														
							$("#not-tallas").css('display', 'none');
							$("#nueva-talla-not").val("");

							select = ''
								for (var i = 0; i < data.tallas.length; i++) {
									if (data.tallas[i].id == data.producto_talla){
										select+='<option value="'+data.tallas[i].id+'" selected="true" >'+data.tallas[i].nombre+'</option>';	
									}else{
										select+='<option value="'+data.tallas[i].id+'" >'+data.tallas[i].nombre+'</option>';	
									}
									
								}
							$("#tallas-select").html(select);
							valor = true
						}else{
							$("#tallas-fine").css('display', 'none');
														
							$("#not-tallas").css('display', 'block');
						}
					
			        
			    },
	        error : function(xhr,errmsg,err) {
						console.log(xhr.status + ": " + xhr.responseText);
					 	$(".load").fadeOut();
					 }              
			
				});
				return valor;
			}
			
			$("#agregar-talla").on('click',function(){
				media_id = $("#media_id_edit").val();
				$("#nueva-talla-mediaid").val(media_id);
				$("#ModalAgregarTalla").modal('show');
			});

			$("#btn-save-nueva-talla-new").on('click',function(){
				var csrftoken = getCookie('csrftoken');
				media_id=$("#nueva-talla-mediaid").val();
				talla = $("#nueva-talla-new").val();


				$.ajax({
			    url : '{% url "admingo:save_talla" %}',
			    type : 'POST',
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'media_id' : media_id,
			    		'talla' : talla
			    	},
					beforeSend: function() {
		        // setting a timeout
		        $(".load").fadeIn();

		    	},
			    success : function(data){
						//console.log(data);
						$(".load").fadeOut();
						if (data.estado == 2){
							
							demo.showNotificationError('top','center','Talla ya existe para este producto');
						}else{
							mostrar_tallas(media_id);
							$('#ModalAgregarTalla').modal('hide');
							demo.showNotificationSucces('top','center','Talla agregada con exito');
							
							if (mostrar_tallas(media_id)){
								$("#nueva-talla-not").val("");
							}
							
						}
					
			        
			    },
	        error : function(xhr,errmsg,err) {
						console.log(xhr.status + ": " + xhr.responseText);
					 	$(".load").fadeOut();
					 }              
			
				});
			});

			function mostrar_modelos(media_id) {
				valor = false
				var csrftoken = getCookie('csrftoken');
				$.ajax({
			    url : '{% url "admingo:show_modelos" %}',
			    type : 'POST',
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'media_id' : media_id
			    	},
			    success : function(data){

						if (data.estado == 1){
							$("#modelos-fine").css('display', 'block')
														
							$("#not-modelos").css('display', 'none');
							$("#nueva-modelo-not").val("");	
							select = ''
								for (var i = 0; i < data.modelos.length; i++) {
									if (data.modelos[i].id == data.producto_modelo){
										select+='<option value="'+data.modelos[i].id+'" selected="true" >'+data.modelos[i].nombre+'</option>';	
									}else{
										select+='<option value="'+data.modelos[i].id+'" >'+data.modelos[i].nombre+'</option>';	
									}
									
								}
							$("#modelos-select").html(select);
							valor = true
						}else{
							$("#modelos-fine").css('display', 'none');
														
							$("#not-modelos").css('display', 'block');
						}
					
			        
			    },
	        error : function(xhr,errmsg,err) {
						console.log(xhr.status + ": " + xhr.responseText);
					 	$(".load").fadeOut();
					 }              
			
				});
				return valor
			}

			$("#agregar-modelo").on('click',function(){
				media_id = $("#media_id_edit").val();
				$("#nueva-modelo-mediaid").val(media_id);
				$("#ModalAgregarModelo").modal('show');
			});


			$("#btn-save-nueva-modelo-new").on('click',function(){
				var csrftoken = getCookie('csrftoken');
				media_id=$("#nueva-modelo-mediaid").val();
				modelo = $("#nueva-modelo-new").val();


				$.ajax({
			    url : '{% url "admingo:save_modelo" %}',
			    type : 'POST',
			    data : 
			    	{	'csrfmiddlewaretoken' : csrftoken,
			    		'media_id' : media_id,
			    		'modelo' : modelo
			    	},
					beforeSend: function() {
		        // setting a timeout
		        $(".load").fadeIn();

		    	},
			    success : function(data){
						//console.log(data);
						$(".load").fadeOut();
						if (data.estado == 2){
							
							demo.showNotificationError('top','center','Modelo ya existe para este producto');
						}else{
							$('#ModalAgregarModelo').modal('hide');
							demo.showNotificationSucces('top','center','Modelo agregado con exito');
							
							if (mostrar_modelos(media_id)){
								$("#nueva-modelo-not").val("");	
							}
							
						}
					
			        
			    },
	        error : function(xhr,errmsg,err) {
						console.log(xhr.status + ": " + xhr.responseText);
					 	$(".load").fadeOut();
					 }              
			
				});
			});

	
	}); // end document Ready
	</script>

</html>



